{"version":3,"sources":["config.js","services/token-service.js","contexts/BusContext.js","components/Loading/Loading.js","components/Message/Message.js","components/Utils/Utils.js","components/Header/Header.js","services/bus-stop-api-service.js","components/SearchBar/SearchBar.js","components/Utils/PublicOnlyRoute.js","components/StopListItem/StopListItem.js","routes/StopListPage/StopListPage.js","services/auth-api-service.js","components/LoginForm/LoginForm.js","routes/LoginPage/LoginPage.js","components/RegistrationForm/RegistrationForm.js","routes/RegistrationPage/RegistrationPage.js","routes/NotFoundPage/NotFoundPage.js","components/LateBusForm/LateBusForm.js","routes/LateBusPage/LateBusPage.js","components/App/App.js","index.js","components/Loading/loading.jpg"],"names":["config","TokenService","saveAuthToken","token","window","localStorage","setItem","getAuthToken","getItem","clearAuthToken","removeItem","hasAuthToken","makeBasicAuthToken","userName","password","btoa","concat","BusContext","React","createContext","BusProvider","_Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","state","stopList","routeList","delaysList","authToken","error","setDelaysList","setState","setUserName","setAuthToken","setStopList","setRouteList","setError","console","log","clearError","inherits","createClass","key","value","react_default","a","createElement","Provider","props","children","Component","Loading","loading","className","src","loadingImgJpg","alt","Fragment","Message","isActive","message","Hyph","Button","_ref2","objectWithoutProperties","assign","join","Input","_ref4","Required","_ref5","Section","_ref6","list","classes","filter","Boolean","Header","handleLogoutClick","context","react_router_dom","onClick","to","contextType","BusStopApiService","getStops","fetch","headers","then","res","ok","json","e","Promise","reject","getRoutes","getTimesAtStop","stopId","time","getDelays","method","content-type","postDelay","delay","body","JSON","stringify","SearchBar","handleSubmitSearch","ev","preventDefault","target","stop_id","getTime","catch","Date","h","getHours","m","getMinutes","s","getSeconds","slice","onSubmit","type","name","placeholder","PublicOnlyRoute","_ref","component","react_router","render","componentProps","StopListItem","routeShortName","stopName","stopDesc","arrival","pathname","StopListPage","toLocaleString","timeZone","split","stopTime","parseInt","_this$context$stopLis","fetchCurrentDateHour","sort","b","seen","Set","filteredStops","stop","duplicate","has","add","map","reg","i","exec","dateCreated","hour","stopHour","compare","fetchStopHour","compareCurrentTimeToStop","delayTime","StopListItem_StopListItem_StopListItem","id","stopCode","stopLat","lat","stopLon","lon","departure","tripRouteId","routeLongName","SearchBar_SearchBar_SearchBar","renderStops","AuthApiService","postLogin","user_name","postUser","user","LoginForm","handleSubmitJwtAuth","_ev$target","onLoginSuccess","role","htmlFor","required","defaultProps","LoginPage","handleLoginSuccess","_this$props","location","history","destination","from","push","LoginForm_LoginForm","RegistrationForm","handleSubmit","onRegistrationSuccess","handleRegistrationSuccess","RegistrationForm_RegistrationForm","NotFoundPage","LateBusPage","_this2","routes","route","selected","disabled","onChange","handleChangeStopId","handleChangeRouteName","handleChangeDelay","event","stop_number","route_short_name","delay_time","_this$props$location$","LateBusForm_LateBusPage","App","isLoading","firstLoad","Loading_Loading","Header_Header_Header","Message_Message","exact","path","ReactDOM","BusContext_BusProvider","App_App_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.5a192471.chunk.js","sourcesContent":["export default {\n  STOPS_API_ENDPOINT: 'http://localhost:8000/api/stops',\n  API_ENDPOINT: 'http://localhost:8000/api',\n  TOKEN_KEY: 'salembus-client-auth-token',\n  FIRST_LOAD_MESSAGE: 'Please enter a stop above',\n}","import config from '../config'\n\nconst TokenService = {\n  saveAuthToken(token) {\n    window.localStorage.setItem(config.TOKEN_KEY, token)\n  },\n  getAuthToken() {\n    return window.localStorage.getItem(config.TOKEN_KEY)\n  },\n  clearAuthToken() {\n    window.localStorage.removeItem(config.TOKEN_KEY)\n  },\n  hasAuthToken() {\n    return !!TokenService.getAuthToken()\n  },\n  makeBasicAuthToken(userName, password) {\n    return window.btoa(`${userName}:${password}`)\n  },\n}\n\nexport default TokenService","import React, { Component } from 'react'\nimport TokenService from '../services/token-service';\n\nconst BusContext = React.createContext({\n  // stopsList: [],\n  // routesList: [],\n  // error: null,\n  // authToken: TokenService.getAuthToken(),\n  // setError: () => {},\n  // clearError: () => {},\n  // setStopList: () => {},\n  // setAuthToken: () => {},\n  // setLoggedIn: () => {}\n})\nexport default BusContext\n\nexport class BusProvider extends Component {\n  state = {\n    stopList: [],\n    routeList: [],\n    delaysList: [],\n    authToken: TokenService.getAuthToken(),\n    userName: null,\n    error: null\n  }\n\n  setDelaysList = delaysList => {\n    this.setState({ delaysList })\n  }\n\n  setUserName = userName => {\n    this.setState({ userName })\n  }\n  \n  setAuthToken = authToken => {\n    this.setState({ authToken })\n  }\n\n  setStopList = stopList => {\n    this.setState({ stopList })\n  }\n\n  setRouteList = routeList => {\n    this.setState({ routeList })\n  }\n\n  setError = error => {\n    console.log(error)\n    this.setState({ error })\n  }\n\n  clearError = () => {\n    this.setState({ error: null })\n  }\n\n  render() {\n    const value = {\n      stopList: this.state.stopList,\n      routeList: this.state.routeList,\n      delaysList: this.state.delaysList,\n      error: this.state.error,\n      setError: this.setError,\n      clearError: this.clearError,\n      setStopList: this.setStopList,\n      setRouteList: this.setRouteList,\n      setAuthToken: this.setAuthToken,\n      setDelaysList: this.setDelaysList,\n      authToken: this.state.authToken\n    }\n\n    return (\n      <BusContext.Provider value={value}>\n        {this.props.children}\n      </BusContext.Provider>\n    )\n  }\n}","import React from 'react';\nimport './Loading.css';\nimport loadingImgJpg from './loading.jpg';\n\nexport default function Loading(props) {\n\n  let loading;\n\n  if (props.loading) {\n    loading = (\n      <div className=\"loading\">\n        <img src={loadingImgJpg} alt=\"loading spinner\" />\n      </div>\n    )\n  }\n  \n  return (\n    <>\n      {loading}\n    </>\n  )\n  \n}\n","import React from 'react';\nimport './Message.css';\n\nexport default function Message(props) {\n\n  let className = 'message-inactive';\n\n  if (props.isActive) {\n    className = 'message-active';\n  }\n  \n  return (\n    <div className={className}>\n\n      <div className=\"message-menu\">\n        {/* <a href=\"#\" className=\"closebtn\">&times;</a> */}\n        <div>&times;</div>\n      </div>\n\n      <p>\n        {props.message}\n      </p>\n\n    </div>\n  )\n\n} \n","import React from 'react'\nimport { format as formatDate } from 'date-fns'\nimport './Utils.css'\n\nexport function NiceDate({ date, format='Do MMMM YYYY' }) {\n  return formatDate(date, format)\n}\n\nexport function Hyph() {\n  return <span className='Hyph'>{' - '}</span>\n}\n\nexport function Button({ className, ...props }) {\n  return <button className={['Button', className].join(' ')} {...props} />\n}\n\nexport function Textarea({ className, ...props }) {\n  return (\n    <textarea className={['Textarea', className].join(' ')} {...props} />\n  )\n}\n\nexport function Input({ className, ...props }) {\n  return (\n    <input className={['Input', className].join(' ')} {...props} />\n  )\n}\n\nexport function Required({ className, ...props }) {\n  return (\n    <span className={['Required', className].join(' ')} {...props}>\n      &#42;\n    </span>\n  )\n}\n\nexport function Section({ className, list, ...props }) {\n  const classes = [\n    'Section',\n    list && 'Section--list',\n    className,\n  ].filter(Boolean).join(' ')\n  return (\n    <section className={classes} {...props} />\n  )\n}","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Hyph } from '../Utils/Utils'\nimport TokenService from '../../services/token-service'\nimport './Header.css'\nimport BusContext from '../../contexts/BusContext';\n\nexport default class Header extends Component {\n  static contextType = BusContext\n\n  handleLogoutClick = () => {\n    this.context.setAuthToken(null)\n    TokenService.clearAuthToken()\n  }\n\n  renderLogoutLink() {\n    \n    return (\n      <div className='Header__logged-in'>\n        <Link\n          onClick={this.handleLogoutClick}\n          to='/'>\n          Logout\n        </Link>\n      </div>\n    )\n  }\n\n  renderLoginLink() {\n    \n    return (\n      <div className='Header__not-logged-in'>\n        <Link\n          to='/register'>\n          Register\n        </Link>\n        <Hyph />\n        <Link\n          to='/login'>\n          Log in\n        </Link>\n      </div>\n    )\n  }\n\n  renderMenu() {\n    return (\n      <Link \n        to='/late'>\n        Late bus\n      </Link>\n    )\n  }\n\n  render() {\n    return (\n      <nav className='header'>\n        <h1>\n          <Link to='/'>\n            {/* Header icon/image here in future */}\n            {' '}\n            Salem Bus\n          </Link>\n        </h1>\n        {/* {this.context.authToken\n          ? this.renderLogoutLink()\n          : this.renderLoginLink()}\n        { '|' } */}\n        {/* {this.renderMenu()} */}\n      </nav>\n    )\n  }\n}\n","//import TokenService from './token-service'\nimport config from '../config'\n\nconst BusStopApiService = {\n  getStops() {\n    return fetch(`${config.API_ENDPOINT}/stops`, {\n      headers: {\n      },\n    })\n      .then(res =>\n        (!res.ok)\n          ? res.json().then(e => Promise.reject(e))\n          : res.json()\n      )\n  },\n  getRoutes() {\n    return fetch(`${config.API_ENDPOINT}/routes`, {\n      headers: {\n      }\n    })\n      .then(res => \n        (!res.ok)\n          ? res.json().then(e => Promise.reject(e))\n          : res.json()  \n      )\n  },\n  getTimesAtStop(stopId, time) {\n    // Non-exact endpoint for at this time and after this time\n    return fetch(`${config.API_ENDPOINT}/stops/times/${stopId}/${time}`, {\n      headers: {\n      },\n    })\n      .then(res =>\n        (!res.ok)\n          ? res.json().then(e => Promise.reject(e))\n          : res.json()\n      )\n  },\n  getDelays() {\n    return fetch(`${config.API_ENDPOINT}/delays`, {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n      },\n    })\n      .then(res=>\n        (!res.ok)\n          ? res.json().then(e => Promise.reject(e))\n          : res.json()  \n      )\n  },\n  postDelay(delay) {\n    return fetch(`${config.API_ENDPOINT}/delays`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify(delay),\n    })\n      .then(res =>\n        (!res.ok)\n          ? res.json().then(e => Promise.reject(e))\n          : res.json()\n      )\n  },\n\n}\n\nexport default BusStopApiService","import React, { Component } from 'react'\nimport BusContext from '../../contexts/BusContext'\nimport BusStopApiService from '../../services/bus-stop-api-service'\nimport './SearchBar.css'\n\nexport default class SearchBar extends Component {\n  static contextType = BusContext\n  \n  state = { error: null }\n\n  getTime() {\n    let time = new Date();\n    let h = time.getHours();\n    let m = time.getMinutes();\n    let s = time.getSeconds();\n    let formatTime = \n      (\"0\" + h).slice(-2) + \":\" + \n      (\"0\" + m).slice(-2) + \":\" + \n      (\"0\" + s).slice(-2);\n    return formatTime;\n  }\n\n  handleSubmitSearch = ev => {\n    ev.preventDefault() \n    let stopId = ev.target.stop_id.value \n    BusStopApiService.getTimesAtStop(stopId, this.getTime())\n      .then(this.context.setStopList)\n      .catch(this.context.setError)\n    \n    BusStopApiService.getDelays()\n      .then(this.context.setDelaysList)\n      .catch(this.context.clearError)\n\n    \n  }\n\n  render() {\n    return (\n      <div className=\"search-menu\">\n        <form onSubmit={this.handleSubmitSearch}>\n          <input type=\"text\" name=\"stop_id\" placeholder=\"Enter a stop id\" />\n          <button type=\"submit\">Submit</button>\n        </form>\n      </div>\n    )\n  }\n}","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport TokenService from '../../services/token-service'\n\nexport default function PublicOnlyRoute({ component, ...props }) {\n  const Component = component\n  return (\n    <Route\n      {...props}\n      render={componentProps => (\n        TokenService.hasAuthToken()\n          ? <Redirect to={'/'} />\n          : <Component {...componentProps} />\n      )}\n    />\n  )\n}\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport './StopListItem.css'\nimport BusContext from '../../contexts/BusContext'\n\nexport default class StopListItem extends Component {\n  static contextType = BusContext\n  \n  render() {\n    \n    return (\n      <div className='StopListItem'>\n       \n        <h4>\n          {this.props.stopId} - {this.props.routeShortName} - {this.props.stopName}\n        </h4>\n        {this.props.stopDesc} <br />\n        Reported arrival: {this.props.arrival}\n        <br />\n        <Link \n          to={{\n            pathname: '/late',\n            state: {\n              stopId: this.props.stopId,\n              routeShortName: this.props.routeShortName,\n            }\n          }}>\n          Late bus\n        </Link>\n        <br />\n        Delay: {this.props.delay}\n        <hr />    \n      </div>\n    )\n  }\n}\n\n","import React, { Component } from 'react'\nimport BusContext from '../../contexts/BusContext'\n//import BusStopApiService from '../../services/bus-stop-api-service'\nimport { Section } from '../../components/Utils/Utils'\nimport StopListItem from '../../components/StopListItem/StopListItem'\nimport SearchBar from '../../components/SearchBar/SearchBar'\nimport './StopListPage.css'\n\nexport default class StopListPage extends Component {\n  static contextType = BusContext\n\n  componentDidMount() {\n    this.context.clearError()\n    // BusStopApiService.getStops()\n    //   .then(this.context.setStopList)\n    //   .catch(this.context.setError)\n  }\n\n  fetchCurrentDateHour(){\n    let currentDate = new Date().toLocaleString({timeZone: \"America/Los_Angeles\"})\n    let splitTime = currentDate.split(\" \")\n    //console.log(splitTime[1])\n    let hour = splitTime[1].split(\":\")\n    return hour[0]\n  }\n\n  fetchStopHour(time) {\n    time = time.split(\":\")\n    //convert form UTC to PST / west coast US time\n    let adjust = time[0] - 7\n    return adjust\n  }\n\n  compareCurrentTimeToStop(time, stopTime) {\n    // console.log(parseInt(time) - parseInt(stopTime))\n    // console.log(parseInt(time))\n    // console.log(parseInt(stopTime))\n    if (parseInt(time) === parseInt(stopTime)) {\n      return true\n    }\n    else {\n      return false\n    }\n  }\n\n  renderStops() {\n    \n    const { stopList = [] } = this.context\n    const delaysList = this.context.delaysList\n    let currentHour = this.fetchCurrentDateHour()\n\n    stopList.sort((a,b) => (a.arrival > b.arrival) ? 1 : -1)\n    \n    const seen = new Set()\n    const filteredStops = stopList.filter(stop => {\n      const duplicate = seen.has(stop.routeShortName);\n      seen.add(stop.routeShortName);\n      return !duplicate;\n    });\n    \n    filteredStops.map((stop, reg) => {\n      for (let i = 0; i < delaysList.length; i++) {\n\n        // a temporary solution for only getting delays within the current hour\n        // does not yet account for minutes\n        let time = /[01][0-9]:[0-5][0-9]:[0-5][0-9]/g.exec(delaysList[i].dateCreated)\n        let hour\n        let stopHour\n        let compare\n\n        if (time) {\n          hour = this.fetchCurrentDateHour()\n          stopHour = this.fetchStopHour(time[0])\n          compare = this.compareCurrentTimeToStop(hour, stopHour)\n        }\n       \n        //if (stop.routeShortName === delaysList[i].routeShortName) {\n        if (stop.routeShortName === delaysList[i].routeShortName && compare === true) {\n          stop.delay = delaysList[i].delayTime\n        }\n        else {\n          stop.delay = ''\n        }\n        \n      }\n    })\n   \n    return filteredStops.map(stop =>\n      <StopListItem\n        key={stop.id}\n        stopId={stop.stopId}\n        stopCode={stop.stopCode}\n        stopName={stop.stopName}\n        stopDesc={stop.stopDesc}\n        stopLat={stop.lat}\n        stopLon={stop.lon}\n        arrival={stop.arrival}\n        departure={stop.departure}\n        tripRouteId={stop.tripRouteId}\n        routeShortName={stop.routeShortName}\n        routeLongName={stop.routeLongName}\n        delay={stop.delay}\n      />\n    )\n  }\n\n  render() {\n    const { error } = this.context\n    return (\n      <>\n        <SearchBar />\n        <Section list className='StopsListPage'>\n        \n          {error\n            ? <p className='red'>There was an error, try again</p>\n            : this.renderStops()}\n        </Section>\n      </>\n    )\n  }\n}\n","\nimport config from '../config'\n\nconst AuthApiService = {\n  postLogin({ user_name, password }) {\n    \n    return fetch(`${config.API_ENDPOINT}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({ user_name, password }),\n    })\n      .then(res =>\n        (!res.ok)\n          ? res.json().then(e => Promise.reject(e))\n          : res.json()\n      )\n  },\n  postUser(user) {\n    return fetch(`${config.API_ENDPOINT}/users`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify(user),\n    })\n      .then(res =>\n        (!res.ok)\n          ? res.json().then(e => Promise.reject(e))\n          : res.json()\n      )\n  },\n}\n\nexport default AuthApiService","import React, { Component } from 'react'\nimport TokenService from '../../services/token-service'\nimport AuthApiService from '../../services/auth-api-service'\nimport { Button, Input } from '../Utils/Utils'\nimport BusContext, { BusProvider } from '../../contexts/BusContext'\n\nexport default class LoginForm extends Component {\n  static contextType = BusContext\n\n  static defaultProps = {\n    onLoginSuccess: () => {}\n  }\n\n  state = { \n    error: null,\n    authToken: null,\n  }\n\n  handleSubmitJwtAuth = ev => {\n    ev.preventDefault()\n    this.setState({ error: null })\n    const { user_name, password } = ev.target\n\n    AuthApiService.postLogin({\n      user_name: user_name.value,\n      password: password.value,\n    })\n      .then(res => {\n        user_name.value = ''\n        password.value = ''\n        this.context.setAuthToken(res.authToken)\n        this.context.setUserName(user_name)\n        TokenService.saveAuthToken(res.authToken)\n        this.props.onLoginSuccess()\n      })\n      .catch(res => {\n        this.setState({ error: res.error })\n      })\n  }\n\n  render() {\n    \n    const { error } = this.state\n    return (\n      <form\n        className='LoginForm'\n        onSubmit={this.handleSubmitJwtAuth}\n      >\n        <div role='alert'>\n          {error && <p className='red'>{error}</p>}\n        </div>\n        <div className='user_name'>\n          <label htmlFor='LoginForm__user_name'>\n            User name\n          </label>\n          <Input\n            required\n            name='user_name'\n            id='LoginForm__user_name'>\n          </Input>\n        </div>\n        <div className='password'>\n          <label htmlFor='LoginForm__password'>\n            Password\n          </label>\n          <Input\n            required\n            name='password'\n            type='password'\n            id='LoginForm__password'>\n          </Input>\n        </div>\n        <Button type='submit'>\n          Login\n        </Button>\n      </form>\n      \n    )\n  }\n}\n","import React, { Component } from 'react'\nimport LoginForm from '../../components/LoginForm/LoginForm'\nimport { Section } from '../../components/Utils/Utils'\nimport BusContext from '../../contexts/BusContext'\n\nexport default class LoginPage extends Component {\n  static contextType = BusContext\n\n  static defaultProps = {\n    location: {},\n    history: {\n      push: () => {},\n    },\n  }\n\n  handleLoginSuccess = () => {\n    const { location, history } = this.props\n    const destination = (location.state || {}).from || '/'\n    history.push(destination)\n  }\n\n  render() {\n    return (\n      <Section className='LoginPage'>\n        <h2>Login</h2>\n        <LoginForm\n          onLoginSuccess={this.handleLoginSuccess}\n        />\n      </Section>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { Button, Input, Required } from '../Utils/Utils'\nimport AuthApiService from '../../services/auth-api-service'\n\nexport default class RegistrationForm extends Component {\n  static defaultProps = {\n    onRegistrationSuccess: () => {}\n  }\n\n  state = { error: null }\n\n  handleSubmit = ev => {\n    \n    ev.preventDefault()\n    const { user_name, password } = ev.target\n    this.setState({ error: null })\n\n    AuthApiService.postUser({\n      user_name: user_name.value,\n      password: password.value,\n    })\n      .then(user => {  \n        user_name.value = ''\n        password.value = ''\n        this.props.onRegistrationSuccess()\n      })\n      .catch(res => {\n        this.setState({ error: res.error })\n      })\n  }\n\n  render() {\n    const { error } = this.state\n    return (\n      <form\n        className='RegistrationForm'\n        onSubmit={this.handleSubmit}\n      >\n        <div role='alert'>\n          {error && <p className='red'>{error}</p>}\n        </div>\n        <div className='user_name'>\n          <label htmlFor='RegistrationForm__user_name'>\n            User name <Required />\n          </label>\n          <Input\n            name='user_name'\n            type='text'\n            required\n            id='RegistrationForm__user_name'>\n          </Input>\n        </div>\n        <div className='password'>\n          <label htmlFor='RegistrationForm__password'>\n            Password <Required />\n          </label>\n          <Input\n            name='password'\n            type='password'\n            required\n            id='RegistrationForm__password'>\n          </Input>\n        </div>\n        <Button type='submit'>\n          Register\n        </Button>\n      </form>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { Section } from '../../components/Utils/Utils'\nimport RegistrationForm from '../../components/RegistrationForm/RegistrationForm'\n\nexport default class RegistrationPage extends Component {\n  static defaultProps = {\n    history: {\n      push: () => {},\n    },\n  }\n\n  handleRegistrationSuccess = user => {\n    const { history } = this.props\n    history.push('/login')\n  }\n\n  render() {\n    return (\n      <Section className='RegistrationPage'>\n        <h2>Register</h2>\n        <RegistrationForm\n          onRegistrationSuccess={this.handleRegistrationSuccess}\n        />\n      </Section>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { Section } from '../../components/Utils/Utils'\n\nexport default class NotFoundPage extends Component {\n  render() {\n    return (\n      <Section className='NotFoundPage'>\n        <h2>404 - Page not found</h2>\n        <p>Try going back to your previous page.</p>\n      </Section>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport BusContext from '../../contexts/BusContext'\nimport { Section } from '../../components/Utils/Utils'\nimport { Button, Input, Select } from '../Utils/Utils'\nimport './LateBusForm.css'\nexport default class LateBusPage extends Component {\n  static contextType = BusContext\n  \n  state = { \n    error: null,\n  }\n\n  render() {\n    const { error } = this.state \n    \n    // build routes dropdown\n    // if routeShortName matches pass in value, set to selected\n    const routes = this.props.routes.map(route => {\n      if(this.props.routeShortName == route.routeShortName) {\n        return <option selected value={route.routeShortName}>{route.routeShortName}</option>\n      } else {\n        return <option value={route.routeShortName}>{route.routeShortName}</option>\n      }\n    })\n\n    return (\n      <form\n        className='LateBusForm'\n        onSubmit={this.props.handleSubmit}\n      >\n        <div role='alert'>\n          {error && <p className='red'>{error}</p>}\n        </div>\n        <div className='stop-id'>\n          <label htmlFor='stop_id'>\n            Stop ID\n          </label>\n          <Input\n            required\n            name='stopId'\n            type='text'\n            id='stopId'\n            value={this.props.stopId}\n            disabled\n            onChange={this.props.handleChangeStopId}\n          />\n        </div>\n        <div className='stop-id'>\n          <label htmlFor='route'>\n            Route\n          </label>\n          <select\n            required\n            name='route'\n            id='route'\n            className=\"Select\"\n            disabled\n            onChange={this.props.handleChangeRouteName}\n          >\n            {routes}\n          </select>\n        </div>\n        <hr />\n        <div className=''>\n          <label htmlFor='route'>\n            How late is the bus?\n          </label>\n          <select\n            required\n            name='route'\n            id='route'\n            className=\"Select\"\n            onChange={this.props.handleChangeDelay}\n          >\n            <option value=\"10-min-late\">10 minutes late</option>\n            <option value=\"0-min-late\" selected>On time</option>\n            <option value=\"10-min-early\">10 minutes early</option>\n          </select>\n        </div>\n        \n        <Button type='submit'>\n          Submit\n        </Button>\n      </form>\n    )\n  }\n}","import React, { Component } from 'react'\nimport BusContext from '../../contexts/BusContext'\nimport BusStopApiService from '../../services/bus-stop-api-service'\nimport { Section } from '../../components/Utils/Utils'\nimport LateBusForm from '../../components/LateBusForm/LateBusForm'\n\nexport default class LateBusPage extends Component {\n  static contextType = BusContext\n\n  static defaultProps = {\n    location: {},\n    history: {\n      push: () => {},\n    }\n  }\n\n  state={\n    stopId: null,\n    routeShortName: null,\n    delay: 0\n  }\n\n  componentDidMount() {\n    this.context.clearError()\n    const { stopId,routeShortName } = this.props.location.state\n    this.setState({ stopId, routeShortName })\n    \n    BusStopApiService.getRoutes()\n      .then(this.context.setRouteList)\n      .catch(this.context.setError)\n  }\n\n  handleChangeStopId = (event) => {\n    this.setState({ stopId: event.target.value })\n  }\n\n  handleChangeRouteName = (event) => {\n    this.setState({ route: event.target.value })\n  }\n\n  handleChangeDelay = (event) => {\n    this.setState({ delay: event.target.value })\n  }\n\n  handleSubmit = (event) => {\n    const { location, history } = this.props\n    event.preventDefault()\n    let delay = {\n      stop_number: this.state.stopId,\n      route_short_name: this.state.routeShortName,\n      delay_time: this.state.delay,\n    }\n    BusStopApiService.postDelay(delay)\n    history.push('/')\n  }\n\n  render() {\n    console.log(this.context.routeList)\n    return (\n      <Section className='LateBusPage'>\n        <LateBusForm \n          routes={this.context.routeList}\n          stopId={this.state.stopId}\n          routeShortName={this.state.routeShortName}\n          handleChangeStopId={this.handleChangeStopId}\n          handleChangeRouteName={this.handleChangeRouteName}\n          handleChangeDelay={this.handleChangeDelay}\n          handleSubmit={this.handleSubmit}\n        />\n      </Section>\n    )\n  }\n}","import React, { Component } from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport './App.css'\nimport Loading from '../Loading/Loading'\nimport Message from '../Message/Message'\nimport Header from '../Header/Header'\nimport SearchBar from '../SearchBar/SearchBar'\nimport PrivateRoute from '../Utils/PrivateRoute'\nimport PublicOnlyRoute from '../Utils/PublicOnlyRoute'\nimport StopListPage from '../../routes/StopListPage/StopListPage'\nimport LoginPage from '../../routes/LoginPage/LoginPage'\nimport RegistrationPage from '../../routes/RegistrationPage/RegistrationPage'\nimport NotFoundPage from '../../routes/NotFoundPage/NotFoundPage'\nimport LateBusPage from '../../routes/LateBusPage/LateBusPage'\n\nexport default class App extends Component {\n  state = {\n    isLoading: false,\n    firstLoad: true,\n    message: 'hi',\n  }\n  render() {\n    \n    return (\n      <>\n        <Loading loading={this.state.isLoading} />\n        <Header />\n        <main className=\"App\">\n          <Message \n            message='Please enter a stop ID number above to search for bus times.'\n            isActive={false}\n          />\n          \n          <Switch>\n            <Route\n              exact\n              path={'/'}\n              component={StopListPage}\n            />\n            {/* <PublicOnlyRoute\n              path={'/login'}\n              component={LoginPage}\n            /> */}\n            {/* <PublicOnlyRoute\n              path={'/register'}\n              component={RegistrationPage}\n            /> */}\n            {/* <PrivateRoute  */}\n            <PublicOnlyRoute\n              path={'/late'}\n              component={LateBusPage}\n            />\n            <Route\n              component={NotFoundPage}\n            />\n          </Switch>\n\n        </main>\n      </>\n\n    );\n  }\n  \n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport './index.css'\nimport { BusProvider } from './contexts/BusContext'\nimport App from './components/App/App'\n\nReactDOM.render(\n  <BrowserRouter>\n    <BusProvider>\n      <App />\n    </BusProvider>\n  </BrowserRouter>,\n  document.getElementById('root')\n\n)","module.exports = __webpack_public_path__ + \"static/media/loading.bbf63906.jpg\";"],"sourceRoot":""}